# questions
author:
  type: str
  help: "Author name"

email:
  type: str
  help: "Email address"
  default: "example@example.com"

project_name:
  type: str
  help: "Project name"
  validator: >-
    {% if not (project_name | regex_search('^[a-z][a-z0-9\-_]+$')) %}
    project_name must start with a letter, followed one or more letters, digits or dashes all lowercase.
    {% endif %}

project_slug:
  type: str
  help: "Project slug"
  default: "{{ project_name.lower().replace(' ', '_').replace('-', '_') }}"
  validator: >-
    {% if not (project_slug | regex_search('^[a-z][a-z0-9\_]+$')) %}
    project_slug must start with a letter, followed one or more letters, digits or dashes all lowercase.
    {% endif %}
    {% if project_slug != project_slug.lower() %}
    project_slug must be all lowercase.
    {% endif %}

project_description:
  type: str
  help: "Project description"
  default: "This is a my new python project"

python_version:
  type: str
  help: "specify python version"
  default: "3.12"
  validator: >-
    {% if not (python_version | regex_search('^3\.\d{1,2}$')) %}
    python_version must be in the format 3.xx
    {% endif %}

pylint:
  type: bool
  help: "Do you want to include pylint?"
  default: False

mypy:
  type: bool
  help: "Do you want to include mypy?"
  default: False

precommit:
  type: bool
  help: "Do you want to include pre-commit?"
  default: False

mkdocs:
  type: bool
  help: "Do you want to include mkdocs?"
  default: False

taskfile:
  type: bool
  help: "Do you want to include taskfile"
  default: False

gitlabci:
  type: bool
  help: "Do you want to include gitlab-ci"
  default: False

pytest:
  type: bool
  help: "Do you want to include pytest?"
  default: False

codecov:
  type: bool
  help: "Do you want to include codecov?"
  when: "{{ pytest }}"
  default: False

dockerfile:
  type: bool
  help: "Do you want to include Dockerfile?"
  default: False

docker_compose:
  type: bool
  help: "Do you want to include docker-compose?"
  when: "{{ dockerfile }}"
  default: False

run_uv_sync:
  type: bool
  help: "Run uv sync install after {{ project_name }} generation?"
  default: yes

configure_git:
  type: bool
  help: "Configure git? (init{% if precommit %}, pre-commit{% endif %})"
  default: yes

# Variables
_templates_suffix: .j2
_subdirectory: project
_envops:
  # Jinja settings to remove whitespace
  lstrip_blocks: true
  trim_blocks: true
_tasks:
  # Run 'uv sync' to generate lockfile
  - "{% if run_uv_sync %}uv sync{% endif %}"
  # Setup pre-commit
  - "{% if configure_git %}git init{% endif %}"
  - "{% if configure_git and precommit %}uv run pre-commit install{% endif %}"